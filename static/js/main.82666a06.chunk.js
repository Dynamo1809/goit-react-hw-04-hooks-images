(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{15:function(e,t,c){},39:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(4),o=c.n(r),s=(c(15),c(3)),i=c(9),u=c(10),l=c.n(u),j=c(1),b=function(e){var t=e.webformatURL,c=e.largeImageURL,n=e.onOpenModal;return Object(j.jsx)("li",{className:"ImageGalleryItem",children:Object(j.jsx)("img",{onClick:function(){return n(c)},src:t,alt:"",className:"ImageGalleryItem-image"})})},h=function(e){var t=e.onClick;return Object(j.jsx)("button",{onClick:t,type:"button",className:"Button",children:"Load more"})},m="21948076-53f9c976759f5ce811ed96a6f",f="https://pixabay.com/api/?image_type=photo&orientation=horizontal&";var d={fetchPhotos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;return fetch("".concat(f,"q=").concat(e,"&page=").concat(t,"&key=").concat(m,"&per_page=").concat(c)).then((function(e){return e.ok?e.json():Promise.reject(new Error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u043f\u0438\u0442\u0443"))}))}},O="idle",g="resolved",p="rejected";function v(e){var t=e.searchQuery,c=e.onOpenModal,a=Object(n.useState)([]),r=Object(s.a)(a,2),o=r[0],u=r[1],m=Object(n.useState)(null),f=Object(s.a)(m,2),v=f[0],x=f[1],S=Object(n.useState)(!1),y=Object(s.a)(S,2),w=y[0],k=y[1],N=Object(n.useState)(1),C=Object(s.a)(N,2),L=C[0],E=C[1],I=Object(n.useState)(O),R=Object(s.a)(I,2),F=R[0],M=R[1],U=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e}),[e]),t.current}(t);Object(n.useEffect)((function(){if(t){if(k(!0),U!==t)return P(),void d.fetchPhotos(t).then((function(e){M(g),u(e.hits),k(!1)})).catch((function(e){x(e.message),M(p)}));1!==L&&U===t&&d.fetchPhotos(t,L).then((function(e){M(g),u((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e.hits))})),k(!1),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){x(e.message),M(p)}))}}),[L,t,U]);var P=function(){E(1),M(O)};return F===O?null:F===p?Object(j.jsxs)("h1",{style:{textAlign:"center"},children:["\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u043f\u0438\u0442\u0443: '",v,"'"]}):F===g?0!==o.length?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("ul",{className:"ImageGallery",children:o.map((function(e){var t=e.id,n=e.webformatURL,a=e.largeImageURL;return Object(j.jsx)(b,{onOpenModal:c,webformatURL:n,largeImageURL:a},t)}))}),w&&Object(j.jsx)(l.a,{className:"Loader",type:"ThreeDots",color:"#3f51b5"}),o.length%12===0&&Object(j.jsx)(h,{onClick:function(e){return E((function(e){return e+1}))}})]}):Object(j.jsxs)("h2",{style:{textAlign:"center"},children:["\u041d\u0435\u043c\u0430\u0454 \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u044c \u0437\u0430 \u0437\u0430\u043f\u0438\u0442\u043e\u043c '",t,"'"]}):void 0}var x=c(6);function S(e){var t=e.onSubmit,c=Object(n.useState)(""),a=Object(s.a)(c,2),r=a[0],o=a[1],i=function(){return o("")};return Object(j.jsx)("header",{className:"Searchbar",children:Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==r.trim()?(t(r),i()):x.b.error("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0442\u0435\u043a\u0441\u0442")},className:"SearchForm",children:[Object(j.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(j.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(j.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",value:r,autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){var t=e.currentTarget.value;o(t.toLowerCase())}})]})})}var y=document.querySelector("#modal-root");function w(e){var t=e.src,c=e.onClose,a=Object(n.useCallback)((function(e){"Escape"===e.code&&c("")}),[c]);Object(n.useEffect)((function(){return window.addEventListener("keydown",a),function(){return window.removeEventListener("keydown",a)}}),[a]);return Object(r.createPortal)(Object(j.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&c("")},children:Object(j.jsx)("div",{className:"Modal",children:Object(j.jsx)("img",{src:t,alt:""})})}),y)}var k=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(""),o=Object(s.a)(r,2),i=o[0],u=o[1],l=function(e){return u(e)};return Object(j.jsxs)("div",{className:"App",children:[i&&Object(j.jsx)(w,{src:i,onClose:l}),Object(j.jsx)(x.a,{autoClose:1500}),Object(j.jsx)(S,{onSubmit:function(e){c!==e?a(e):Object(x.b)("Search name '".concat(e,"' already used"))}}),Object(j.jsx)(v,{onOpenModal:l,searchQuery:c})]})};c(37),c(38);o.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.82666a06.chunk.js.map